
@{
    ViewData["Title"] = "First";
}

<h1>First</h1>
<button id="button1" class="btn btn-primary mb-3">Ajax</button>
<div id="div1" class="alert alert-info"></div>

@section Scripts{
    <script>
        const btn = document.querySelector('#button1');
        const theDiv = document.querySelector('#div1');
        btn.addEventListener('click',()=> {
            //Ajax
           // console.log(fetch('/api/index'));
           //promise resolve() reject
            fetch('/api/index') 
                .then(response => {
                    // console.log(response);
                    // console.log(response.text()); //promise
                    return response.text();
                })
                .then(data => {
                    //console.log(data);
                    theDiv.innerHTML = `<h2>${data}</h2>`;
                })


            //theDiv.innerHTML = "<h2>Ajax...</h2>";
        })
    </script>
}
